# RUN: llc -mtriple=mos6502 -run-pass=prologepilog -verify-machineinstrs -o - %s | FileCheck %s
---
name: stack
# CHECK-LABEL: name: stack
stack:
  - { id: 0, size: 1}
  - { id: 1, size: 1}
body:             |
  bb.0.entry:
    SThs $a, %stack.1 :: (store 1 into %stack.1)
    $a = LDhs %stack.0 :: (load 1 from %stack.0)
    RTS
# CHECK-LABEL: bb.0.entry:
# CHECK-NEXT:  PHA
# CHECK-NEXT:  PHA
# CHECK-NEXT:  SThs $a, 0
# CHECK-NEXT:  $a = LDhs 1
# CHECK-NEXT:  PLA
# CHECK-NEXT:  PLA
# CHECK-NEXT:  RTS
...

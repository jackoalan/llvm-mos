# RUN: llc -mtriple=mos6502 -run-pass=postrapseudos -o - %s | FileCheck %s
---
name:            test_tax
# CHECK-LABEL: name: test_tax
body:             |
  bb.0.entry:
    $a = LDimm 0, implicit-def $nz
    $x = COPY $a
# CHECK: TA_ $x
...
---
name:            test_txa
# CHECK-LABEL: name: test_txa
body:             |
  bb.0.entry:
    $x = LDimm 0, implicit-def $nz
    $a = COPY $x
# CHECK: T_A $x
...
---
name:            test_tay
# CHECK-LABEL: name: test_tay
body:             |
  bb.0.entry:
    $a = LDimm 0, implicit-def $nz
    $y = COPY $a
# CHECK: TA_ $y
...
---
name:            test_tya
# CHECK-LABEL: name: test_tya
body:             |
  bb.0.entry:
    $y = LDimm 0, implicit-def $nz
    $a = COPY $y
# CHECK: T_A $y
...
---
name:            test_txy
# CHECK-LABEL: name: test_txy
body:             |
  bb.0.entry:
    $x = LDimm 0, implicit-def $nz
    $y = COPY $x
# CHECK:      T_A $x
# CHECK-NEXT: TA_ $y
...
---
name:            test_tyx
# CHECK-LABEL: name: test_tyx
body:             |
  bb.0.entry:
    $y = LDimm 0, implicit-def $nz
    $x = COPY $y
# CHECK:      T_A $y
# CHECK-NEXT: TA_ $x
...
---
name:            test_preserve_nz
# CHECK-LABEL: name: test_preserve_nz
body:             |
  bb.0.entry:
    $a = LDimm 0, implicit-def $nz
    $y = LDimm 1, implicit-def $nz
    $x = COPY $a
    BNE %bb.0, implicit $nz
# CHECK:      PHP
# CHECK-NEXT: TA_ $x
# CHECK-NEXT: PLP
# CHECK-NEXT: BNE %bb.0, implicit $nz
...
---
name:            test_preserve_a
# CHECK-LABEL: name: test_preserve_a
body:             |
  bb.0.entry:
    $a = LDimm 1, implicit-def $nz
    $x = LDimm 0, implicit-def $nz
    $y = COPY $x
    CMPimm $a, 0, implicit-def $nz
# CHECK:      PHA
# CHECK-NEXT: T_A $x
# CHECK-NEXT: TA_ $y
# CHECK-NEXT: PLA
...

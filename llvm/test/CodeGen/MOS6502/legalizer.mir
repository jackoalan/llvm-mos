# RUN: llc -mtriple=mos6502 -run-pass=legalizer -verify-machineinstrs -o - %s | FileCheck %s
--- |
  @.str = constant [2 x i8] c"XY"
  define void @ptradd_global_offset() {
    entry:
      ret void
  }
  define void @ptradd_zext() {
    entry:
      ret void
  }
---
name: ptradd_global_offset
# CHECK-LABEL: name: ptradd_global_offset
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(p0) = G_GLOBAL_VALUE @.str + 1200
    %1:any(s16) = G_CONSTANT i16 34
    %2:any(p0) = G_PTR_ADD %0, %1
    $zp_ptr_0 = COPY %2
# CHECK: %2:any(p0) = G_GLOBAL_VALUE @.str + 1234
...
---
name: ptradd_zext
# CHECK-LABEL: name: ptradd_zext
regBankSelected: true
body: |
  bb.0.entry:
    %0:any(p0) = G_IMPLICIT_DEF
    %1:any(s8) = G_IMPLICIT_DEF
    %2:any(s16) = G_ZEXT %1
    %3:any(p0) = G_PTR_ADD %0, %2
    $zp_ptr_0 = COPY %3
# CHECK: %3:any(p0) = G_PTR_ADD %0, %1
...

# RUN: llc -mtriple=mos6502 -run-pass=twoaddressinstruction -verify-machineinstrs -o - %s | FileCheck %s
---
name: commute
# CHECK-LABEL: name: commute
legalized: true
regBankSelected: true
body: |
  bb.0.entry:
    liveins: $c
    %0:ac = IMPLICIT_DEF
    %1:zp = IMPLICIT_DEF
    %2:ac = ADCzpr %0:ac, killed %1:zp, implicit-def $c, implicit-def $nz, implicit $c
    RTS implicit %2
# CHECK:      %0:zp = IMPLICIT_DEF
# CHECK-NEXT: %1:ac = IMPLICIT_DEF
# CHECK-NEXT: %2:ac = COPY %1
# CHECK-NEXT: %2:ac = ADCzpr %2, %0
# CHECK-NEXT: RTS implicit %2
...
